var y=Object.defineProperty;var P=(n,e,s)=>e in n?y(n,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[e]=s;var i=(n,e,s)=>(P(n,typeof e!="symbol"?e+"":e,s),s);const E=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function s(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerpolicy&&(o.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?o.credentials="include":t.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(t){if(t.ep)return;t.ep=!0;const o=s(t);fetch(t.href,o)}};E();class u{constructor(e,s,r){i(this,"templateElement");i(this,"hostElement");i(this,"element");this.templateElement=document.getElementById(e),this.hostElement=document.getElementById(s);const t=document.importNode(this.templateElement.content,!0);this.element=t.firstElementChild,this.element.id=r,this.Attach()}Attach(){this.hostElement.insertAdjacentElement("beforeend",this.element)}}var h;(function(n){n.active="active",n.finished="finished"})(h||(h={}));var a=h;class C{constructor(e,s,r){i(this,"id");i(this,"title");i(this,"description");i(this,"people");i(this,"status");this.id=Math.random().toString(),this.title=e,this.description=s,this.people=r,this.status=a.active}}class L{constructor(){i(this,"listeners",[])}AddListener(e){this.listeners.push(e)}}const v=class extends L{constructor(){super();i(this,"projects");this.projects=[]}static GetInstance(){return this.instance?this.instance:(this.instance=new v,this.instance)}updateListeners(){for(const e of this.listeners)e(this.projects.slice())}AddProject(e,s,r){this.projects.push(new C(e,s,r)),this.updateListeners()}UpdateProjectStatus(e,s){const r=this.projects.find(t=>t.id===e);r&&r.status!==s&&(r.status=s,this.updateListeners())}};let d=v;i(d,"instance");class m{constructor(e,s,r,t){i(this,"_value");i(this,"required");i(this,"minLength");i(this,"maxLength");i(this,"min");i(this,"max");this._value=e,this.required=s,typeof e=="string"?(this.minLength=r,this.maxLength=t):typeof e=="number"&&(this.min=r,this.max=t)}IsValid(){let e=!0;return typeof this._value=="string"?(this.required&&(e=e&&this._value.trim().length!==0),this.minLength!=null&&(e=e&&this._value.length>this.minLength),this.maxLength!=null&&(e=e&&this._value.length<this.maxLength)):typeof this._value=="number"&&(this.min!=null&&(e=e&&this._value>this.min),this.max!=null&&(e=e&&this._value<this.max)),e}get value(){return this._value}}function p(n,e,s){const r=s.value;return{configurable:!0,enumerable:!1,get(){return r.bind(this)}}}var _=Object.defineProperty,I=Object.getOwnPropertyDescriptor,b=(n,e,s,r)=>{for(var t=r>1?void 0:r?I(e,s):e,o=n.length-1,l;o>=0;o--)(l=n[o])&&(t=(r?l(e,s,t):l(t))||t);return r&&t&&_(e,s,t),t};class g extends u{constructor(){super("project-input","app","user-input");i(this,"state",d.GetInstance());i(this,"titleInputElement");i(this,"descriptionInputElement");i(this,"peopleInputElement");this.titleInputElement=this.element.querySelector("#title"),this.descriptionInputElement=this.element.querySelector("#description"),this.peopleInputElement=this.element.querySelector("#people"),this.Configure()}Configure(){this.element.addEventListener("submit",this.SubmitHandler)}SubmitHandler(e){e.preventDefault();const s=this.GatherUserInput();if(Array.isArray(s)){const[r,t,o]=s;this.CreateProject(r,t,o),this.ClearInputs()}}GatherUserInput(){const e=new m(this.titleInputElement.value,!0,5,20),s=new m(this.descriptionInputElement.value,!0,10,50),r=new m(+this.peopleInputElement.value,!0,0,5);if(e.IsValid()&&s.IsValid()&&r.IsValid())return[e.value,s.value,r.value];alert("Invalid input")}CreateProject(e,s,r){this.state.AddProject(e,s,r)}ClearInputs(){this.titleInputElement.value="",this.descriptionInputElement.value="",this.peopleInputElement.value=""}}b([p],g.prototype,"SubmitHandler",1);var S=Object.defineProperty,O=Object.getOwnPropertyDescriptor,x=(n,e,s,r)=>{for(var t=r>1?void 0:r?O(e,s):e,o=n.length-1,l;o>=0;o--)(l=n[o])&&(t=(r?l(e,s,t):l(t))||t);return r&&t&&S(e,s,t),t};class j extends u{constructor(e,s){super("single-project",e,s.id);i(this,"project");this.project=s,this.Configure(),this.RenderContent()}get persons(){return this.project.people===1?"1 Person":`${this.project.people} Persons`}Configure(){this.element.addEventListener("dragstart",this.dragStartHandler),this.element.addEventListener("dragend",this.dragEndHandler)}RenderContent(){this.element.querySelector("h2").textContent=this.project.title,this.element.querySelector("h3").textContent=`${this.persons} assigned`,this.element.querySelector("p").textContent=this.project.description}dragStartHandler(e){e.dataTransfer.setData("text/plain",this.project.id),e.dataTransfer.effectAllowed="move"}dragEndHandler(e){}}x([p],j.prototype,"dragStartHandler",1);var H=Object.defineProperty,w=Object.getOwnPropertyDescriptor,f=(n,e,s,r)=>{for(var t=r>1?void 0:r?w(e,s):e,o=n.length-1,l;o>=0;o--)(l=n[o])&&(t=(r?l(e,s,t):l(t))||t);return r&&t&&H(e,s,t),t};class c extends u{constructor(e){super("project-list","app",`${e}-projects`);i(this,"type");i(this,"assignedProjects");i(this,"state",d.GetInstance());this.type=e,this.assignedProjects=[],this.Configure(),this.RenderContent()}Configure(){this.state.AddListener(e=>{const s=e.filter(r=>r.status===this.type);this.assignedProjects=s,this.RenderProjects()}),this.element.addEventListener("dragover",this.dragOverHandler),this.element.addEventListener("drop",this.dropHandler),this.element.addEventListener("dragleave",this.dragLeaveHandler)}RenderContent(){this.element.querySelector("ul").id=`${this.type}-project-list`,this.element.querySelector("h2").textContent=`${this.type.toUpperCase()} PROJECTS`}RenderProjects(){const e=document.getElementById(`${this.type}-project-list`);e.textContent="";for(const s of this.assignedProjects)new j(e.id,s)}addDroppableClass(){const e=this.element.querySelector("ul");e==null||e.classList.add("droppable")}removeDroppableClass(){const e=this.element.querySelector("ul");e==null||e.classList.remove("droppable")}dragOverHandler(e){e.preventDefault(),this.addDroppableClass()}dropHandler(e){this.removeDroppableClass(),this.state.UpdateProjectStatus(e.dataTransfer.getData("text/plain"),this.type===a.active?a.active:a.finished)}dragLeaveHandler(e){this.removeDroppableClass()}}f([p],c.prototype,"dragOverHandler",1);f([p],c.prototype,"dropHandler",1);f([p],c.prototype,"dragLeaveHandler",1);const q=document.querySelector("#app");q.innerHTML="<h1>Project Manager</h1>";new g;new c(a.active);new c(a.finished);
